<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>运维规范目录索引 | 运维规范文档</title>
  <link rel="stylesheet" href="/KOpsDoc/assets/css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/lunr/lunr.min.js"></script>
  <script>
    var BASEURL = "/KOpsDoc";
  </script>
  <script src="/KOpsDoc/assets/js/search.js" defer></script>
  <script src="/KOpsDoc/assets/js/theme.js" defer></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css">
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (window.mermaid) {
        mermaid.initialize({ startOnLoad: false });
        document.querySelectorAll('code.language-mermaid, code.mermaid').forEach(function(block, i) {
          var pre = block.parentElement;
          var code = block.textContent;
          var container = document.createElement('div');
          container.className = 'mermaid';
          container.textContent = code;
          pre.parentNode.replaceChild(container, pre);
          try { mermaid.init(undefined, container); } catch(e) {}
        });
      }
    });
  </script>
</head>
<body>
  <header class="book-header">
    <a href="/KOpsDoc/" class="book-logo" aria-label="返回首页">运维规范文档</a>
    <button id="theme-toggle" onclick="toggleTheme()" aria-label="切换主题" type="button">
      <i id="theme-toggle-icon" class="ti ti-moon-stars"></i>
    </button>
  </header>
  <div class="book-container">
    <aside class="book-sidebar">
      <nav>
        <input type="search" id="doc-search" placeholder="搜索文档..." autocomplete="off" />
        <div id="search-results" class="search-results"></div>
        <h2>文档导航</h2>
        <ul>
        
        
        
        
          <li class="nav-group"><strong>0. 目录与索引</strong>
            <ul>
            
              
              
                
                <li><a href="/KOpsDoc/%E7%9B%AE%E5%BD%95%E6%B8%85%E5%8D%95.html">目录清单</a></li>
              
            
              
              
            
            </ul>
          </li>
        
          <li class="nav-group"><strong>1. 基础通用规范</strong>
            <ul>
            
              
              
                
                <li><a href="/KOpsDoc/1.1-%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83.html">1.1-基础设施命名规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/1.2-%E4%B8%BB%E6%9C%BA%E4%B8%8E%E8%B5%84%E4%BA%A7%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83.html">1.2-主机与资产管理规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/1.3-%E8%B4%A6%E5%8F%B7%E4%B8%8E%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83.html">1.3-账号与权限管理规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/1.4-%E6%96%87%E6%A1%A3%E4%B8%8E%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83.html">1.4-文档与知识管理规范</a></li>
              
            
            </ul>
          </li>
        
          <li class="nav-group"><strong>2. 变更与发布管理</strong>
            <ul>
            
              
              
                
                <li><a href="/KOpsDoc/2.1-%E5%8F%98%E6%9B%B4%E4%B8%8E%E5%8F%91%E5%B8%83%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83.html">2.1-变更与发布管理规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/2.1-%E5%8F%98%E6%9B%B4%E4%B8%8E%E5%8F%91%E5%B8%83%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83-%E6%A1%88%E4%BE%8B%E9%9B%86%E9%94%A6.html">2.1-变更与发布管理规范-案例集锦</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/2.2-%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4%E4%B8%8E%E8%84%9A%E6%9C%AC%E8%A7%84%E8%8C%83.html">2.2-自动化运维与脚本规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/2.3-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E4%B8%8E%E6%BC%94%E7%BB%83%E8%A7%84%E8%8C%83.html">2.3-自动化测试与演练规范</a></li>
              
            
            </ul>
          </li>
        
          <li class="nav-group"><strong>3. 监控与可观测性</strong>
            <ul>
            
              
              
                
                <li><a href="/KOpsDoc/3.1-%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%91%8A%E8%AD%A6%E8%A7%84%E8%8C%83.html">3.1-监控与告警规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/3.1-%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%91%8A%E8%AD%A6%E8%A7%84%E8%8C%83-%E6%B5%81%E7%A8%8B%E5%9B%BE.html">3.1-监控与告警规范-流程图</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/3.2-%E6%97%A5%E5%BF%97%E4%B8%8E%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%E8%A7%84%E8%8C%83.html">3.2-日志与可观测性规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/3.3-%E8%BF%90%E7%BB%B4%E8%B4%A8%E9%87%8F%E4%B8%8E%E6%95%88%E8%83%BD%E5%BA%A6%E9%87%8F%E8%A7%84%E8%8C%83.html">3.3-运维质量与效能度量规范</a></li>
              
            
            </ul>
          </li>
        
          <li class="nav-group"><strong>4. 安全与合规</strong>
            <ul>
            
              
              
                
                <li><a href="/KOpsDoc/4.1-%E5%AE%89%E5%85%A8%E5%90%88%E8%A7%84%E4%B8%8E%E5%AE%A1%E8%AE%A1%E8%A7%84%E8%8C%83.html">4.1-安全合规与审计规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/4.2-%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E4%B8%8E%E9%9A%90%E7%A7%81%E4%BF%9D%E6%8A%A4%E8%A7%84%E8%8C%83.html">4.2-数据安全与隐私保护规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/4.3-%E8%BF%90%E7%BB%B4%E5%AE%89%E5%85%A8%E5%BA%94%E6%80%A5%E6%BC%94%E7%BB%83%E8%A7%84%E8%8C%83.html">4.3-运维安全应急演练规范</a></li>
              
            
            </ul>
          </li>
        
          <li class="nav-group"><strong>5. 云原生与智能运维</strong>
            <ul>
            
              
              
                
                <li><a href="/KOpsDoc/5.1-%E5%AE%B9%E5%99%A8%E4%B8%8E%E4%BA%91%E5%8E%9F%E7%94%9F%E8%BF%90%E7%BB%B4%E8%A7%84%E8%8C%83.html">5.1-容器与云原生运维规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/5.2-CI_CD%E6%B5%81%E6%B0%B4%E7%BA%BF%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96%E8%A7%84%E8%8C%83.html">5.2-CI_CD流水线与自动化规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/5.3-%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E5%8D%B3%E4%BB%A3%E7%A0%81%EF%BC%88IaC%EF%BC%89%E8%A7%84%E8%8C%83.html">5.3-基础设施即代码（IaC）规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/5.4-%E5%A4%9A%E4%BA%91%E4%B8%8E%E6%B7%B7%E5%90%88%E4%BA%91%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83.html">5.4-多云与混合云管理规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/5.5-AIOps%E4%B8%8E%E6%99%BA%E8%83%BD%E8%BF%90%E7%BB%B4%E8%A7%84%E8%8C%83.html">5.5-AIOps与智能运维规范</a></li>
              
            
            </ul>
          </li>
        
          <li class="nav-group"><strong>6. 运营与可持续发展</strong>
            <ul>
            
              
              
                
                <li><a href="/KOpsDoc/6.1-%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D%E8%A7%84%E8%8C%83.html">6.1-备份与恢复规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/6.2-%E4%BE%9B%E5%BA%94%E5%95%86%E4%B8%8E%E5%A4%96%E5%8C%85%E7%AE%A1%E7%90%86%E8%A7%84%E8%8C%83.html">6.2-供应商与外包管理规范</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/6.3-%E7%BB%BF%E8%89%B2%E8%BF%90%E7%BB%B4%E4%B8%8E%E5%8F%AF%E6%8C%81%E7%BB%AD%E5%8F%91%E5%B1%95%E8%A7%84%E8%8C%83.html">6.3-绿色运维与可持续发展规范</a></li>
              
            
            </ul>
          </li>
        
          <li class="nav-group"><strong>7. 工具与补充清单</strong>
            <ul>
            
              
              
                
                <li><a href="/KOpsDoc/7.1-%E8%BF%90%E7%BB%B4%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%B8%85%E5%8D%95.html">7.1-运维常用工具清单</a></li>
              
            
            </ul>
          </li>
        
          <li class="nav-group"><strong>8. 补充SOP与实用手册</strong>
            <ul>
            
              
              
                
                <li><a href="/KOpsDoc/8.1-%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5SOP.html">8.1-安全策略SOP</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/8.2-%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%B5%81%E7%A8%8B.html">8.2-灾难恢复流程</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/8.3-DevOps%E5%8F%91%E5%B8%83%E6%B5%81%E7%A8%8B.html">8.3-DevOps发布流程</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/8.4-%E5%B7%A1%E6%A3%80%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC.html">8.4-巡检与自动化脚本</a></li>
              
            
              
              
                
                <li><a href="/KOpsDoc/8.5-%E5%80%BC%E7%8F%AD%E6%89%8B%E5%86%8C.html">8.5-值班手册</a></li>
              
            
            </ul>
          </li>
        </ul>
      </nav>
    </aside>
    <main class="book-content">
      <article>
        
        <h1 id="运维规范目录索引">运维规范目录索引</h1>

<p>欢迎使用运维规范文档系统！本目录收录了企业级运维架构师必备的全套运维规范，涵盖基础、变更、监控、安全、云原生、智能运维、绿色可持续等全领域内容。</p>

<p>每份文档均包含适用范围、详细规范、操作流程、案例、模板、注意事项和参考资料，旨在帮助团队建立标准化的运维体系，提升运维效率和质量。</p>

<hr />

<h2 id="-文档结构">📚 文档结构</h2>

<h3 id="0-目录与索引">0. 目录与索引</h3>
<ul>
  <li><a href="./目录清单.md">目录清单</a>：完整文档清单和使用指南</li>
  <li><a href="./README.md">README</a>：本文档，快速入门指南</li>
</ul>

<h3 id="1-基础通用规范">1. 基础通用规范</h3>
<p>涵盖基础设施命名、资产管理、权限管理、文档管理等基础运维规范。</p>

<ul>
  <li><a href="./1.1-基础设施命名规范.md">1.1-基础设施命名规范</a>：资源命名统一、可追溯，便于自动化管理</li>
  <li><a href="./1.2-主机与资产管理规范.md">1.2-主机与资产管理规范</a>：资产全生命周期管理，提升可见性与合规性</li>
  <li><a href="./1.3-账号与权限管理规范.md">1.3-账号与权限管理规范</a>：账号实名、权限最小化、全程审计</li>
  <li><a href="./1.4-文档与知识管理规范.md">1.4-文档与知识管理规范</a>：知识库、SOP、案例归档与复盘</li>
</ul>

<h3 id="2-变更与发布管理">2. 变更与发布管理</h3>
<p>涵盖变更管理、自动化运维、测试演练等变更发布相关规范。</p>

<ul>
  <li><a href="./2.1-变更与发布管理规范.md">2.1-变更与发布管理规范</a>：变更全流程可控、可追溯、可回退</li>
  <li><a href="./2.1-变更与发布管理规范-案例集锦.md">2.1-变更与发布管理规范-案例集锦</a>：变更发布实际案例参考</li>
  <li><a href="./2.2-自动化运维与脚本规范.md">2.2-自动化运维与脚本规范</a>：脚本开发、管理、自动化平台接入</li>
  <li><a href="./2.3-自动化测试与演练规范.md">2.3-自动化测试与演练规范</a>：自动化测试、演练、混沌工程</li>
</ul>

<h3 id="3-监控与可观测性">3. 监控与可观测性</h3>
<p>涵盖监控告警、日志管理、效能度量等可观测性相关规范。</p>

<ul>
  <li><a href="./3.1-监控与告警规范.md">3.1-监控与告警规范</a>：监控全覆盖、告警分级、闭环处理</li>
  <li><a href="./3.1-监控与告警规范-流程图.md">3.1-监控与告警规范-流程图</a>：监控告警流程图</li>
  <li><a href="./3.2-日志与可观测性规范.md">3.2-日志与可观测性规范</a>：日志采集、结构化、分布式追踪</li>
  <li><a href="./3.3-运维质量与效能度量规范.md">3.3-运维质量与效能度量规范</a>：KPI指标、报告、持续改进</li>
</ul>

<h3 id="4-安全与合规">4. 安全与合规</h3>
<p>涵盖安全合规、数据安全、应急演练等安全相关规范。</p>

<ul>
  <li><a href="./4.1-安全合规与审计规范.md">4.1-安全合规与审计规范</a>：安全策略、审计、合规检查</li>
  <li><a href="./4.2-数据安全与隐私保护规范.md">4.2-数据安全与隐私保护规范</a>：数据分级、加密、脱敏、合规</li>
  <li><a href="./4.3-运维安全应急演练规范.md">4.3-运维安全应急演练规范</a>：应急演练、复盘、持续优化</li>
</ul>

<h3 id="5-云原生与智能运维">5. 云原生与智能运维</h3>
<p>涵盖容器化、CI/CD、IaC、多云管理、AIOps等云原生和智能化运维规范。</p>

<ul>
  <li><a href="./5.1-容器与云原生运维规范.md">5.1-容器与云原生运维规范</a>：K8s、镜像、CI/CD、弹性伸缩</li>
  <li><a href="./5.2-CI_CD流水线与自动化规范.md">5.2-CI_CD流水线与自动化规范</a>：流水线设计、自动化测试、回滚</li>
  <li><a href="./5.3-基础设施即代码（IaC）规范.md">5.3-基础设施即代码（IaC）规范</a>：IaC目录、命名、回滚、敏感信息管理</li>
  <li><a href="./5.4-多云与混合云管理规范.md">5.4-多云与混合云管理规范</a>：多云资源统一纳管、网络互通、成本合规</li>
  <li><a href="./5.5-AIOps与智能运维规范.md">5.5-AIOps与智能运维规范</a>：AI告警、异常检测、自愈、容量预测</li>
</ul>

<h3 id="6-运营与可持续发展">6. 运营与可持续发展</h3>
<p>涵盖备份恢复、供应商管理、绿色运维等运营和可持续发展相关规范。</p>

<ul>
  <li><a href="./6.1-备份与恢复规范.md">6.1-备份与恢复规范</a>：备份策略、恢复流程、演练</li>
  <li><a href="./6.2-供应商与外包管理规范.md">6.2-供应商与外包管理规范</a>：第三方接入、合同、SLA、交接</li>
  <li><a href="./6.3-绿色运维与可持续发展规范.md">6.3-绿色运维与可持续发展规范</a>：节能降耗、资源回收、碳排放监控</li>
</ul>

<h3 id="7-工具与补充清单">7. 工具与补充清单</h3>
<p>涵盖运维工具选型、工具清单等实用参考。</p>

<ul>
  <li><a href="./7.1-运维常用工具清单.md">7.1-运维常用工具清单</a>：各领域主流运维工具归类与选型参考</li>
</ul>

<h3 id="8-补充sop与实用手册">8. 补充SOP与实用手册</h3>
<p>涵盖安全策略、灾难恢复、发布流程、巡检脚本、值班手册等实用操作手册。</p>

<ul>
  <li><a href="./8.1-安全策略SOP.md">8.1-安全策略SOP</a>：RBAC权限、密钥管理、API审计等安全操作标准流程</li>
  <li><a href="./8.2-灾难恢复流程.md">8.2-灾难恢复流程</a>：etcd备份恢复、跨区容灾、应急演练SOP</li>
  <li><a href="./8.3-DevOps发布流程.md">8.3-DevOps发布流程</a>：蓝绿/灰度发布、回滚、自动化部署与审计</li>
  <li><a href="./8.4-巡检与自动化脚本.md">8.4-巡检与自动化脚本</a>：定时巡检、脚本库管理、自动化闭环</li>
  <li><a href="./8.5-值班手册.md">8.5-值班手册</a>：值班排班、告警响应、交接流程与常用联系</li>
</ul>

<hr />

<h2 id="-快速开始">🚀 快速开始</h2>

<h3 id="新手上路">新手上路</h3>

<p>如果你是运维新手，建议按以下顺序阅读：</p>

<ol>
  <li><strong>基础规范</strong>：先了解 1.x 系列基础规范</li>
  <li><strong>变更管理</strong>：学习 2.1 变更与发布管理规范</li>
  <li><strong>监控告警</strong>：掌握 3.1 监控与告警规范</li>
  <li><strong>实用手册</strong>：熟悉 8.x 系列实用操作手册</li>
</ol>

<h3 id="按场景查找">按场景查找</h3>

<ul>
  <li><strong>新建资源</strong>：参考 <a href="./1.1-基础设施命名规范.md">1.1-基础设施命名规范</a></li>
  <li><strong>变更发布</strong>：参考 <a href="./2.1-变更与发布管理规范.md">2.1-变更与发布管理规范</a> 和 <a href="./8.3-DevOps发布流程.md">8.3-DevOps发布流程</a></li>
  <li><strong>监控告警</strong>：参考 <a href="./3.1-监控与告警规范.md">3.1-监控与告警规范</a></li>
  <li><strong>安全操作</strong>：参考 <a href="./4.1-安全合规与审计规范.md">4.1-安全合规与审计规范</a> 和 <a href="./8.1-安全策略SOP.md">8.1-安全策略SOP</a></li>
  <li><strong>容器化运维</strong>：参考 <a href="./5.1-容器与云原生运维规范.md">5.1-容器与云原生运维规范</a></li>
  <li><strong>CI/CD</strong>：参考 <a href="./5.2-CI_CD流水线与自动化规范.md">5.2-CI_CD流水线与自动化规范</a></li>
  <li><strong>备份恢复</strong>：参考 <a href="./6.1-备份与恢复规范.md">6.1-备份与恢复规范</a> 和 <a href="./8.2-灾难恢复流程.md">8.2-灾难恢复流程</a></li>
  <li><strong>值班操作</strong>：参考 <a href="./8.5-值班手册.md">8.5-值班手册</a></li>
</ul>

<h3 id="按角色查找">按角色查找</h3>

<ul>
  <li><strong>运维工程师</strong>：重点关注 2.x、3.x、8.x 系列文档</li>
  <li><strong>安全工程师</strong>：重点关注 4.x、8.1 文档</li>
  <li><strong>开发工程师</strong>：重点关注 2.1、5.2 文档</li>
  <li><strong>架构师</strong>：重点关注 1.x、5.x、6.x 文档</li>
  <li><strong>管理者</strong>：重点关注 3.3、6.2、6.3 文档</li>
</ul>

<hr />

<h2 id="-文档使用说明">📖 文档使用说明</h2>

<h3 id="文档结构">文档结构</h3>

<p>每份规范文档通常包含以下章节：</p>

<ol>
  <li><strong>一、适用范围与目标</strong>：说明文档适用的场景和目标</li>
  <li><strong>二、管理目标</strong>：列出主要管理目标</li>
  <li><strong>三、详细规范</strong>：详细的规范要求和标准</li>
  <li><strong>四、操作流程</strong>：标准化的操作流程</li>
  <li><strong>五、实际案例</strong>：实际应用案例</li>
  <li><strong>六、操作模板</strong>：实用的模板和示例</li>
  <li><strong>七、注意事项</strong>：需要注意的关键点</li>
  <li><strong>八、参考资料</strong>：相关参考资料</li>
</ol>

<h3 id="文档更新">文档更新</h3>

<ul>
  <li>文档会定期更新，请关注最新版本</li>
  <li>如有问题或建议，请通过 Git 提交 Issue</li>
  <li>重大变更会通过公告通知</li>
</ul>

<hr />

<h2 id="-搜索功能">🔍 搜索功能</h2>

<p>使用页面顶部的搜索框可以快速查找文档内容。支持：</p>
<ul>
  <li>文档标题搜索</li>
  <li>文档内容全文搜索</li>
  <li>关键词高亮显示</li>
</ul>

<hr />

<h2 id="-贡献指南">📝 贡献指南</h2>

<p>欢迎贡献文档改进建议：</p>

<ol>
  <li>发现问题或需要改进的地方</li>
  <li>提交 Issue 或 Pull Request</li>
  <li>参与文档评审和讨论</li>
</ol>

<hr />

<h2 id="-联系方式">📞 联系方式</h2>

<ul>
  <li><strong>维护团队</strong>：运维团队</li>
  <li><strong>文档版本</strong>：v1.0</li>
  <li><strong>最后更新</strong>：2024-01-27</li>
  <li><strong>反馈渠道</strong>：通过 Git 提交 Issue 或联系运维团队</li>
</ul>

<hr />

<h2 id="-相关资源">📚 相关资源</h2>

<ul>
  <li><a href="./目录清单.md">完整文档清单</a></li>
  <li><a href="./7.1-运维常用工具清单.md">运维工具清单</a></li>
  <li><a href="./2.1-变更与发布管理规范-案例集锦.md">变更发布案例</a></li>
</ul>

<hr />

<p><strong>祝您使用愉快！</strong> 🎉</p>

      </article>
    </main>
  </div>
  <footer class="book-footer">
    <p>© 2026 运维规范文档 | Powered by Jekyll and AI</p>
  </footer>
  <button class="sidebar-toggle-btn" id="sidebarToggleBtn" aria-label="展开/收起导航" type="button">
    <i class="ti ti-menu-2" style="font-size:1.5em;"></i>
  </button>
</body>
<script>
  // 移动端侧边栏收起/展开逻辑
  (function() {
    function toggleSidebar(open) {
      var sidebar = document.querySelector('.book-sidebar');
      if (!sidebar) return;
      if (open === undefined) {
        sidebar.classList.toggle('open');
      } else if (open) {
        sidebar.classList.add('open');
      } else {
        sidebar.classList.remove('open');
      }
    }

    function handleSidebarBtn() {
      var btn = document.getElementById('sidebarToggleBtn');
      var sidebar = document.querySelector('.book-sidebar');
      if (!btn || !sidebar) return;

      function check() {
        if (window.innerWidth <= 900) {
          btn.style.display = 'flex';
          if (!sidebar.classList.contains('open')) {
            sidebar.classList.remove('open');
          }
        } else {
          btn.style.display = 'none';
          sidebar.classList.remove('open');
        }
      }

      btn.addEventListener('click', function(e) {
        e.stopPropagation();
        toggleSidebar();
      });

      // 点击外部关闭侧边栏
      document.addEventListener('click', function(e) {
        if (window.innerWidth > 900) return;
        var sidebar = document.querySelector('.book-sidebar');
        if (sidebar && sidebar.classList.contains('open') && 
            !sidebar.contains(e.target) && 
            e.target !== btn && 
            !btn.contains(e.target)) {
          sidebar.classList.remove('open');
        }
      });

      // ESC 键关闭侧边栏
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          var sidebar = document.querySelector('.book-sidebar');
          if (sidebar && sidebar.classList.contains('open')) {
            sidebar.classList.remove('open');
          }
        }
      });

      window.addEventListener('resize', check);
      check();
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', handleSidebarBtn);
    } else {
      handleSidebarBtn();
    }
  })();
</script>
</html>